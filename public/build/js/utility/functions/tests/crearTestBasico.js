import CrearTest from"./crearTest.js";import{cambiarPagina,mostrarFormulario,test}from"./funcionesTestCrear.js";import UI from"../../../layout/UI.js";export default class CrearTestBasico extends CrearTest{formulario2(e){const t=test.preguntas.length+1,o=document.createElement("DIV"),a=document.createElement("DIV"),n=document.createElement("LABEL"),c=document.createElement("INPUT");o.classList.add("campo-pregunta","seccion"),a.classList.add("campo"),n.textContent=`Pregunta ${t}: `,n.setAttribute("for","pregunta"),c.placeholder="Nueva Pregunta",c.id="pregunta",c.name="pregunta",c.type="text",a.appendChild(n),a.appendChild(c),o.appendChild(a);const r=document.createElement("BUTTON");r.type="button",r.textContent="Agregar Pregunta",r.classList.add("boton-verde"),r.onclick=e=>{this.validarPregunta(e.target.parentElement)},o.appendChild(r);const i=test.opciones.length+1,d=document.createElement("DIV"),l=document.createElement("DIV"),p=document.createElement("LABEL"),m=document.createElement("INPUT");d.classList.add("campo-opcion","seccion"),l.classList.add("campo"),p.setAttribute("for","opcion"),p.textContent=`Opcion ${i}: `,m.type="text",m.name="opcion",m.id="opcion",m.placeholder="Nueva Opcion";const s=document.createElement("DIV"),u=document.createElement("LABEL"),C=document.createElement("INPUT");s.classList.add("campo"),u.setAttribute("for","valor"),u.textContent="Valor: ",C.name="valor",C.id="valor",C.placeholder="Valor de la Opcion",C.type="number",C.min=1,C.max=10;const h=document.createElement("BUTTON");h.type="button",h.textContent="Agregar Opcion",h.classList.add("boton-verde"),h.onclick=e=>{this.validarOpcion(e.target.parentElement)},l.appendChild(p),l.appendChild(m),s.appendChild(u),s.appendChild(C),d.appendChild(l),d.appendChild(s),d.appendChild(h),e.appendChild(o),e.appendChild(d)}mostrarModificarOpcion(e,t){const{opcion:o,valor:a,id:n}=e,c=document.createElement("DIV"),r=document.createElement("FORM");r.classList.add("formulario","formulario-modal");const i=document.createElement("DIV"),d=document.createElement("LABEL"),l=document.createElement("INPUT");i.classList.add("campo"),d.setAttribute("for","opcion-modal"),d.textContent=`Opcion ${t}: `,l.type="text",l.name="opcion-modal",l.id="opcion-modal",l.placeholder="Nueva Opcion",l.value=o,i.appendChild(d),i.appendChild(l);const p=document.createElement("DIV"),m=document.createElement("LABEL"),s=document.createElement("INPUT");p.classList.add("campo"),m.setAttribute("for","valor-modal"),m.textContent="Valor: ",s.name="valor-modal",s.id="valor-modal",s.placeholder="Valor de la Opcion",s.type="number",s.min=1,s.max=10,s.value=a,p.appendChild(m),p.appendChild(s);const u=document.createElement("BUTTON");u.type="submit",u.textContent="Guardar Cambios",u.classList.add("boton-verde"),r.appendChild(i),r.appendChild(p),r.appendChild(u),r.onsubmit=e=>{e.preventDefault(),this.validarOpcion(e.target,n)},c.appendChild(r),UI.crearModal(c)}mostrarModalOpciones(){const{opciones:e}=test,t=document.createElement("DIV"),o=document.createElement("H2");o.textContent="Opciones: ";const a=document.createElement("DIV");if(a.classList.add("seccion","contenedor-opciones"),0===e.length){const e=document.createElement("P");e.textContent="No Hay Opciones",a.appendChild(e)}else e.forEach((e,t)=>{const{opcion:o,valor:n,id:c}=e,r=document.createElement("LI"),i=document.createElement("SPAN"),d=document.createElement("SPAN"),l=document.createElement("P");i.textContent=`Opcion ${t+1}: `,d.textContent=o,l.textContent="Valor: "+n;const p=document.createElement("SPAN");p.classList.add("acciones"),p.innerHTML='\n                <button type="button" class="boton-naranja" id="actualizar-opcion">Modificar</button>\n                <button type="button" class="boton-rojo" id="eliminar-opcion">Eliminar</button>\n            ',p.onclick=o=>{"actualizar-opcion"===o.target.id&&this.mostrarModificarOpcion({...e},t+1),"eliminar-opcion"===o.target.id&&this.mostrarEliminarOpcion(c)},r.appendChild(i),r.appendChild(d),r.appendChild(l),r.appendChild(p),a.appendChild(r)});t.appendChild(o),t.appendChild(a),UI.crearModal(t)}validarOpcion(e,t){const o=e.querySelector(t?".campo #opcion-modal":".campo #opcion").value.trim(),a=e.querySelector(t?".campo #valor-modal":".campo #valor").value.trim();if(""===o||""===a)return void UI.mostrarAlerta("Todos los Campos Son Obligatorios",e);if(isNaN(a)||a<1||a>10)return void UI.mostrarAlerta("Valor Invalido",e);if(t){const e={id:t,opcion:o,valor:a};return test.modificarOpcion(e),cambiarPagina(2),this.mostrarModalOpciones(),this.validarMaximoInstrucciones(),void Swal.fire({title:"Exito",text:"Se Actualizo la Opcion",icon:"success"})}const n={id:Math.round(Math.random()*Date.now()),opcion:o,valor:a};test.agregarOpcion(n),mostrarFormulario(),Swal.fire({title:"Exito",text:"Se Creo la Opcion",icon:"success"})}}