import{obtenerUrl}from"../utility/utilidades.js";import FuncionesTest from"../utility/classes/tests/FuncionesTest.js";import TestBasico from"../utility/classes/tests/TestBasico.js";!function(){let t;const e=document.querySelector("#aside-visible");!async function(){try{const o="/api/test?url="+obtenerUrl(),s=await fetch(o),i=await s.json();if("exito"===i.tipo){const{test:o}=i;!async function(o){try{const s="/api/categoria?id="+o.categoriaId,i="/api/usuario?id="+o.usuarioId,a="/api/tipotest?id="+o.tipoTestId,[n,c,r]=await Promise.all([fetch(s),fetch(i),fetch(a)]),l=await n.json(),d=await c.json(),u=await r.json();if("exito"===l.tipo&&"exito"===d.tipo&&u.tipo){const{categoria:s}=l,{usuario:i}=d,{tipoTest:a}=u;t=new FuncionesTest(o,a,s,i),function(e){const{tipoTestId:o}=e;let s;switch(o){case"1":s=new TestBasico(e);break;case"2":case"3":break;default:console.log("Error")}s&&s.mostrarFormulario();t.mostrarAside()}(o),function(){const o=document.createElement("DIV");o.classList.add("opciones");const s=document.createElement("BUTTON");s.textContent="Informacion del Test",s.classList.add("boton-gris-block");const i=document.createElement("BUTTON");i.textContent="Como Contestar el test",i.classList.add("boton-gris-block");const a=document.createElement("BUTTON");a.textContent="Informacion de la Categoria",a.classList.add("boton-gris-block"),s.addEventListener("click",()=>{t.crearModalSobreTest()}),i.addEventListener("click",()=>{t.crearModalTipoTest()}),a.addEventListener("click",()=>{t.crearModalSobreCategoria()}),o.appendChild(s),o.appendChild(i),o.appendChild(a),e.appendChild(o)}()}}catch(t){console.error(t)}}(o)}}catch(t){console.error(t)}}()}();