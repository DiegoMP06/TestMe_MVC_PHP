import{obtenerUrl,RUTA_IMAGENES_USUARIOS}from"../utility/utilidades.js";import FuncionesTest from"../utility/funcionesTest.js";!function(){let t,e={},o={},n={},i={};document.addEventListener("DOMContentLoaded",()=>{!async function(){try{const a="/api/test?url="+obtenerUrl(),s=await fetch(a),c=await s.json();"exito"===c.tipo&&(e=c.test,async function(){try{const a="/api/categorias?id="+e.categoriaId,s="/api/usuarios?id="+e.usuarioId,c="/api/tipotest?id="+e.tipoTestId,[r,d,p]=await Promise.all([fetch(a),fetch(s),fetch(c)]),u=await r.json(),l=await d.json(),m=await p.json();"exito"===u.tipo&&"exito"===l.tipo&&m.tipo&&(o=u.categoria,n=l.usuario,i=m.tipoTest,t=new FuncionesTest(e,i,o,n)),function(){const o=document.querySelector("#test-formulario");Object.entries(e.preguntas).forEach(t=>{const[n,i]=t,a=document.createElement("DIV");a.classList.add("campo-radio");const s=document.createElement("P");s.classList.add("pregunta"),s.id=n,s.textContent=i;const c=document.createElement("DIV");c.classList.add("opciones-test"),Object.entries(e.opciones).forEach(t=>{const[e,o]=t,i=document.createElement("DIV");i.classList.add("radio");const a=document.createElement("INPUT");a.type="radio",a.name=n,a.id=`${n}_${e}`;const s=document.createElement("LABEL");s.setAttribute("for",`${n}_${e}`),s.textContent=o.opcion,i.appendChild(a),i.appendChild(s),c.appendChild(i)}),a.appendChild(s),a.appendChild(c),o.appendChild(a)}),t.mostrarAside()}()}catch(t){console.error(t)}}())}catch(t){console.error(t)}}()})}();